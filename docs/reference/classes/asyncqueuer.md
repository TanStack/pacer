---
id: AsyncQueuer
title: AsyncQueuer
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: AsyncQueuer\<TValue\>

Defined in: [async-queuer.ts:157](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L157)

A flexible asynchronous queue for processing tasks with configurable concurrency, priority, and expiration.

Features:
- Priority queue support via the getPriority option
- Configurable concurrency limit
- Callbacks for task success, error, completion, and queue state changes
- FIFO (First In First Out) or LIFO (Last In First Out) queue behavior
- Pause and resume processing
- Task cancellation
- Item expiration to remove stale items from the queue

Tasks are processed concurrently up to the configured concurrency limit. When a task completes,
the next pending task is processed if the concurrency limit allows.

Error Handling:
- If an `onError` handler is provided, it will be called with the error and queuer instance
- If `throwOnError` is true (default when no onError handler is provided), the error will be thrown
- If `throwOnError` is false (default when onError handler is provided), the error will be swallowed
- Both onError and throwOnError can be used together; the handler will be called before any error is thrown
- The error state can be checked using the AsyncQueuer instance

Example usage:
```ts
const asyncQueuer = new AsyncQueuer<string>(async (item) => {
  // process item
  return item.toUpperCase();
}, {
  concurrency: 2,
  onSuccess: (result) => {
    console.log(result);
  }
});

asyncQueuer.addItem('hello');
asyncQueuer.start();
```

## Type Parameters

â€¢ **TValue**

## Constructors

### new AsyncQueuer()

```ts
new AsyncQueuer<TValue>(fn, initialOptions): AsyncQueuer<TValue>
```

Defined in: [async-queuer.ts:171](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L171)

#### Parameters

##### fn

(`value`) => `Promise`\<`any`\>

##### initialOptions

[`AsyncQueuerOptions`](../interfaces/asyncqueueroptions.md)\<`TValue`\>

#### Returns

[`AsyncQueuer`](asyncqueuer.md)\<`TValue`\>

## Methods

### addItem()

```ts
addItem(
   item, 
   position, 
   runOnItemsChange): void
```

Defined in: [async-queuer.ts:312](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L312)

Adds an item to the queue. If the queue is full, the item is rejected and onReject is called.
Items can be inserted based on priority or at the front/back depending on configuration.

#### Parameters

##### item

`TValue` & `object`

##### position

[`QueuePosition`](../type-aliases/queueposition.md) = `...`

##### runOnItemsChange

`boolean` = `true`

#### Returns

`void`

#### Example

```ts
queuer.addItem({ value: 'task', priority: 10 });
queuer.addItem('task2', 'front');
```

***

### clear()

```ts
clear(): void
```

Defined in: [async-queuer.ts:282](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L282)

Removes all pending items from the queue. Does not affect active tasks.

#### Returns

`void`

***

### execute()

```ts
execute(position?): Promise<any>
```

Defined in: [async-queuer.ts:410](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L410)

Removes and returns the next item from the queue and executes the task function with it.

#### Parameters

##### position?

[`QueuePosition`](../type-aliases/queueposition.md)

#### Returns

`Promise`\<`any`\>

#### Example

```ts
queuer.execute();
// LIFO
queuer.execute('back');
```

***

### getActiveItems()

```ts
getActiveItems(): TValue[]
```

Defined in: [async-queuer.ts:531](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L531)

Returns the items currently being processed (active tasks).

#### Returns

`TValue`[]

***

### getAllItems()

```ts
getAllItems(): TValue[]
```

Defined in: [async-queuer.ts:524](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L524)

Returns a copy of all items in the queue, including active and pending items.

#### Returns

`TValue`[]

***

### getConcurrency()

```ts
getConcurrency(): number
```

Defined in: [async-queuer.ts:215](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L215)

Returns the current concurrency limit for processing items.
If a function is provided, it is called with the queuer instance.

#### Returns

`number`

***

### getErrorCount()

```ts
getErrorCount(): number
```

Defined in: [async-queuer.ts:552](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L552)

Returns the number of items that have failed processing.

#### Returns

`number`

***

### getExpirationCount()

```ts
getExpirationCount(): number
```

Defined in: [async-queuer.ts:587](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L587)

Returns the number of items that have expired and been removed from the queue.

#### Returns

`number`

***

### getIsEmpty()

```ts
getIsEmpty(): boolean
```

Defined in: [async-queuer.ts:503](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L503)

Returns true if the queue is empty (no pending items).

#### Returns

`boolean`

***

### getIsFull()

```ts
getIsFull(): boolean
```

Defined in: [async-queuer.ts:510](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L510)

Returns true if the queue is full (reached maxSize).

#### Returns

`boolean`

***

### getIsIdle()

```ts
getIsIdle(): boolean
```

Defined in: [async-queuer.ts:580](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L580)

Returns true if the queuer is running but has no items to process and no active tasks.

#### Returns

`boolean`

***

### getIsRunning()

```ts
getIsRunning(): boolean
```

Defined in: [async-queuer.ts:573](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L573)

Returns true if the queuer is currently running (processing items).

#### Returns

`boolean`

***

### getNextItem()

```ts
getNextItem(position): undefined | TValue
```

Defined in: [async-queuer.ts:380](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L380)

Removes and returns the next item from the queue without executing the task function.
Use for manual queue management. Normally, use execute() to process items.

#### Parameters

##### position

[`QueuePosition`](../type-aliases/queueposition.md) = `...`

#### Returns

`undefined` \| `TValue`

#### Example

```ts
// FIFO
queuer.getNextItem();
// LIFO
queuer.getNextItem('back');
```

***

### getOptions()

```ts
getOptions(): AsyncQueuerOptions<TValue>
```

Defined in: [async-queuer.ts:199](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L199)

Returns the current queuer options, including defaults and any overrides.

#### Returns

[`AsyncQueuerOptions`](../interfaces/asyncqueueroptions.md)\<`TValue`\>

***

### getPeek()

```ts
getPeek(position): undefined | TValue
```

Defined in: [async-queuer.ts:493](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L493)

Returns the next item in the queue without removing it.

#### Parameters

##### position

[`QueuePosition`](../type-aliases/queueposition.md) = `'front'`

#### Returns

`undefined` \| `TValue`

#### Example

```ts
queuer.getPeek(); // front
queuer.getPeek('back'); // back
```

***

### getPendingItems()

```ts
getPendingItems(): TValue[]
```

Defined in: [async-queuer.ts:538](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L538)

Returns the items waiting to be processed (pending tasks).

#### Returns

`TValue`[]

***

### getRejectionCount()

```ts
getRejectionCount(): number
```

Defined in: [async-queuer.ts:566](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L566)

Returns the number of items that have been rejected from being added to the queue.

#### Returns

`number`

***

### getSettledCount()

```ts
getSettledCount(): number
```

Defined in: [async-queuer.ts:559](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L559)

Returns the number of items that have completed processing (success or error).

#### Returns

`number`

***

### getSize()

```ts
getSize(): number
```

Defined in: [async-queuer.ts:517](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L517)

Returns the number of pending items in the queue.

#### Returns

`number`

***

### getSuccessCount()

```ts
getSuccessCount(): number
```

Defined in: [async-queuer.ts:545](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L545)

Returns the number of items that have been successfully processed.

#### Returns

`number`

***

### getWait()

```ts
getWait(): number
```

Defined in: [async-queuer.ts:207](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L207)

Returns the current wait time (in milliseconds) between processing items.
If a function is provided, it is called with the queuer instance.

#### Returns

`number`

***

### reset()

```ts
reset(withInitialItems?): void
```

Defined in: [async-queuer.ts:291](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L291)

Resets the queuer to its initial state. Optionally repopulates with initial items.
Does not affect callbacks or options.

#### Parameters

##### withInitialItems?

`boolean`

#### Returns

`void`

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [async-queuer.ts:192](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L192)

Updates the queuer options. New options are merged with existing options.

#### Parameters

##### newOptions

`Partial`\<[`AsyncQueuerOptions`](../interfaces/asyncqueueroptions.md)\<`TValue`\>\>

#### Returns

`void`

***

### start()

```ts
start(): void
```

Defined in: [async-queuer.ts:261](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L261)

Starts processing items in the queue. If already running, does nothing.

#### Returns

`void`

***

### stop()

```ts
stop(): void
```

Defined in: [async-queuer.ts:273](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-queuer.ts#L273)

Stops processing items in the queue. Does not clear the queue.

#### Returns

`void`
