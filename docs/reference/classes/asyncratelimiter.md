---
id: AsyncRateLimiter
title: AsyncRateLimiter
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: AsyncRateLimiter\<TFn\>

Defined in: [async-rate-limiter.ts:99](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L99)

A class that creates an async rate-limited function.

Rate limiting is a simple approach that allows a function to execute up to a limit within a time window,
then blocks all subsequent calls until the window passes. This can lead to "bursty" behavior where
all executions happen immediately, followed by a complete block.

The rate limiter supports two types of windows:
- 'fixed': A strict window that resets after the window period. All executions within the window count
  towards the limit, and the window resets completely after the period.
- 'sliding': A rolling window that allows executions as old ones expire. This provides a more
  consistent rate of execution over time.

Unlike the non-async RateLimiter, this async version supports returning values from the rate-limited function,
making it ideal for API calls and other async operations where you want the result of the `maybeExecute` call
instead of setting the result on a state variable from within the rate-limited function.

For smoother execution patterns, consider using:
- Throttling: Ensures consistent spacing between executions (e.g. max once per 200ms)
- Debouncing: Waits for a pause in calls before executing (e.g. after 500ms of no calls)

Rate limiting is best used for hard API limits or resource constraints. For UI updates or
smoothing out frequent events, throttling or debouncing usually provide better user experience.

## Example

```ts
const rateLimiter = new AsyncRateLimiter(
  async (id: string) => await api.getData(id),
  { limit: 5, window: 1000, windowType: 'sliding' } // 5 calls per second with sliding window
);

// Will execute immediately until limit reached, then block
// Returns the API response directly
const data = await rateLimiter.maybeExecute('123');
```

## Type Parameters

â€¢ **TFn** *extends* [`AnyAsyncFunction`](../type-aliases/anyasyncfunction.md)

## Constructors

### new AsyncRateLimiter()

```ts
new AsyncRateLimiter<TFn>(fn, initialOptions): AsyncRateLimiter<TFn>
```

Defined in: [async-rate-limiter.ts:109](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L109)

#### Parameters

##### fn

`TFn`

##### initialOptions

[`AsyncRateLimiterOptions`](../interfaces/asyncratelimiteroptions.md)\<`TFn`\>

#### Returns

[`AsyncRateLimiter`](asyncratelimiter.md)\<`TFn`\>

## Methods

### getEnabled()

```ts
getEnabled(): boolean
```

Defined in: [async-rate-limiter.ts:137](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L137)

Returns the current enabled state of the rate limiter

#### Returns

`boolean`

***

### getErrorCount()

```ts
getErrorCount(): number
```

Defined in: [async-rate-limiter.ts:278](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L278)

Returns the number of times the function has errored

#### Returns

`number`

***

### getIsExecuting()

```ts
getIsExecuting(): boolean
```

Defined in: [async-rate-limiter.ts:292](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L292)

Returns whether the function is currently executing

#### Returns

`boolean`

***

### getLimit()

```ts
getLimit(): number
```

Defined in: [async-rate-limiter.ts:144](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L144)

Returns the current limit of executions allowed within the time window

#### Returns

`number`

***

### getMsUntilNextWindow()

```ts
getMsUntilNextWindow(): number
```

Defined in: [async-rate-limiter.ts:253](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L253)

Returns the number of milliseconds until the next execution will be possible
For fixed windows, this is the time until the current window resets
For sliding windows, this is the time until the oldest execution expires

#### Returns

`number`

***

### getOptions()

```ts
getOptions(): Required<AsyncRateLimiterOptions<TFn>>
```

Defined in: [async-rate-limiter.ts:130](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L130)

Returns the current rate limiter options

#### Returns

`Required`\<[`AsyncRateLimiterOptions`](../interfaces/asyncratelimiteroptions.md)\<`TFn`\>\>

***

### getRejectionCount()

```ts
getRejectionCount(): number
```

Defined in: [async-rate-limiter.ts:285](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L285)

Returns the number of times the function has been rejected

#### Returns

`number`

***

### getRemainingInWindow()

```ts
getRemainingInWindow(): number
```

Defined in: [async-rate-limiter.ts:243](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L243)

Returns the number of remaining executions allowed in the current window

#### Returns

`number`

***

### getSettleCount()

```ts
getSettleCount(): number
```

Defined in: [async-rate-limiter.ts:271](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L271)

Returns the number of times the function has been settled

#### Returns

`number`

***

### getSuccessCount()

```ts
getSuccessCount(): number
```

Defined in: [async-rate-limiter.ts:264](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L264)

Returns the number of times the function has been executed

#### Returns

`number`

***

### getWindow()

```ts
getWindow(): number
```

Defined in: [async-rate-limiter.ts:151](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L151)

Returns the current time window in milliseconds

#### Returns

`number`

***

### maybeExecute()

```ts
maybeExecute(...args): Promise<undefined | ReturnType<TFn>>
```

Defined in: [async-rate-limiter.ts:171](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L171)

Attempts to execute the rate-limited function if within the configured limits.
Will reject execution if the number of calls in the current window exceeds the limit.
If execution is allowed, waits for any previous execution to complete before proceeding.

#### Parameters

##### args

...`Parameters`\<`TFn`\>

#### Returns

`Promise`\<`undefined` \| `ReturnType`\<`TFn`\>\>

#### Example

```ts
const rateLimiter = new AsyncRateLimiter(fn, { limit: 5, window: 1000 });

// First 5 calls will execute
await rateLimiter.maybeExecute('arg1', 'arg2');

// Additional calls within the window will be rejected
await rateLimiter.maybeExecute('arg1', 'arg2'); // Rejected
```

***

### reset()

```ts
reset(): void
```

Defined in: [async-rate-limiter.ts:299](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L299)

Resets the rate limiter state

#### Returns

`void`

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [async-rate-limiter.ts:123](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-rate-limiter.ts#L123)

Updates the rate limiter options
Returns the new options state

#### Parameters

##### newOptions

`Partial`\<[`AsyncRateLimiterOptions`](../interfaces/asyncratelimiteroptions.md)\<`TFn`\>\>

#### Returns

`void`
