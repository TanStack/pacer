---
id: Batcher
title: Batcher
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: Batcher\<TValue\>

Defined in: [batcher.ts:84](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L84)

A class that collects items and processes them in batches.

Batching is a technique for grouping multiple operations together to be processed as a single unit.

The Batcher provides a flexible way to implement batching with configurable:
- Maximum batch size (number of items per batch)
- Time-based batching (process after X milliseconds)
- Custom batch processing logic via getShouldExecute
- Event callbacks for monitoring batch operations

## Example

```ts
const batcher = new Batcher<number>(
  (items) => console.log('Processing batch:', items),
  {
    maxSize: 5,
    wait: 2000,
    onExecuteBatch: (items) => console.log('Batch executed:', items)
  }
);

batcher.addItem(1);
batcher.addItem(2);
// After 2 seconds or when 5 items are added, whichever comes first,
// the batch will be processed
// batcher.execute() // manually trigger a batch
```

## Type Parameters

â€¢ **TValue**

## Constructors

### new Batcher()

```ts
new Batcher<TValue>(fn, initialOptions): Batcher<TValue>
```

Defined in: [batcher.ts:92](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L92)

#### Parameters

##### fn

(`items`) => `void`

##### initialOptions

[`BatcherOptions`](../../interfaces/batcheroptions.md)\<`TValue`\>

#### Returns

[`Batcher`](../batcher.md)\<`TValue`\>

## Methods

### addItem()

```ts
addItem(item): void
```

Defined in: [batcher.ts:118](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L118)

Adds an item to the batcher
If the batch size is reached, timeout occurs, or shouldProcess returns true, the batch will be processed

#### Parameters

##### item

`TValue`

#### Returns

`void`

***

### execute()

```ts
execute(): void
```

Defined in: [batcher.ts:146](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L146)

Processes the current batch of items.
This method will automatically be triggered if the batcher is running and any of these conditions are met:
- The number of items reaches batchSize
- The wait duration has elapsed
- The getShouldExecute function returns true upon adding an item

You can also call this method manually to process the current batch at any time.

#### Returns

`void`

***

### getBatchExecutionCount()

```ts
getBatchExecutionCount(): number
```

Defined in: [batcher.ts:220](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L220)

Returns the number of times batches have been processed

#### Returns

`number`

***

### getIsEmpty()

```ts
getIsEmpty(): boolean
```

Defined in: [batcher.ts:199](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L199)

Returns true if the batcher is empty

#### Returns

`boolean`

***

### getIsRunning()

```ts
getIsRunning(): boolean
```

Defined in: [batcher.ts:206](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L206)

Returns true if the batcher is running

#### Returns

`boolean`

***

### getItemExecutionCount()

```ts
getItemExecutionCount(): number
```

Defined in: [batcher.ts:227](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L227)

Returns the total number of individual items that have been processed

#### Returns

`number`

***

### getOptions()

```ts
getOptions(): BatcherOptions<TValue>
```

Defined in: [batcher.ts:110](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L110)

Returns the current batcher options

#### Returns

[`BatcherOptions`](../../interfaces/batcheroptions.md)\<`TValue`\>

***

### getSize()

```ts
getSize(): number
```

Defined in: [batcher.ts:192](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L192)

Returns the current number of items in the batcher

#### Returns

`number`

***

### peekAllItems()

```ts
peekAllItems(): TValue[]
```

Defined in: [batcher.ts:213](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L213)

Returns a copy of all items currently in the batcher

#### Returns

`TValue`[]

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [batcher.ts:103](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L103)

Updates the batcher options

#### Parameters

##### newOptions

`Partial`\<[`BatcherOptions`](../../interfaces/batcheroptions.md)\<`TValue`\>\>

#### Returns

`void`

***

### start()

```ts
start(): void
```

Defined in: [batcher.ts:181](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L181)

Starts the batcher and processes any pending items

#### Returns

`void`

***

### stop()

```ts
stop(): void
```

Defined in: [batcher.ts:169](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L169)

Stops the batcher from processing batches

#### Returns

`void`
