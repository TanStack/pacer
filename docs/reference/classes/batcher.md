---
id: Batcher
title: Batcher
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: Batcher\<TValue\>

Defined in: [batcher.ts:115](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L115)

A class that collects items and processes them in batches.

Batching is a technique for grouping multiple operations together to be processed as a single unit.

The Batcher provides a flexible way to implement batching with configurable:
- Maximum batch size (number of items per batch)
- Time-based batching (process after X milliseconds)
- Custom batch processing logic via getShouldExecute
- Event callbacks for monitoring batch operations

State Management:
- Use `initialState` to provide initial state values when creating the batcher
- Use `onStateChange` callback to react to state changes and implement custom persistence
- The state includes batch execution count, total items processed, items, and running status
- State can be retrieved using `getState()` method

## Example

```ts
const batcher = new Batcher<number>(
  (items) => console.log('Processing batch:', items),
  {
    maxSize: 5,
    wait: 2000,
    onExecuteBatch: (items) => console.log('Batch executed:', items)
  }
);

batcher.addItem(1);
batcher.addItem(2);
// After 2 seconds or when 5 items are added, whichever comes first,
// the batch will be processed
// batcher.execute() // manually trigger a batch
```

## Type Parameters

â€¢ **TValue**

## Constructors

### new Batcher()

```ts
new Batcher<TValue>(fn, initialOptions): Batcher<TValue>
```

Defined in: [batcher.ts:122](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L122)

#### Parameters

##### fn

(`items`) => `void`

##### initialOptions

[`BatcherOptions`](../../interfaces/batcheroptions.md)\<`TValue`\>

#### Returns

[`Batcher`](../batcher.md)\<`TValue`\>

## Properties

### store

```ts
readonly store: Store<BatcherState<TValue>>;
```

Defined in: [batcher.ts:116](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L116)

## Methods

### addItem()

```ts
addItem(item): void
```

Defined in: [batcher.ts:162](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L162)

Adds an item to the batcher
If the batch size is reached, timeout occurs, or shouldProcess returns true, the batch will be processed

#### Parameters

##### item

`TValue`

#### Returns

`void`

***

### clear()

```ts
clear(): void
```

Defined in: [batcher.ts:253](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L253)

Removes all items from the batcher

#### Returns

`void`

***

### flush()

```ts
flush(): void
```

Defined in: [batcher.ts:218](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L218)

Processes the current batch of items immediately

#### Returns

`void`

***

### peekAllItems()

```ts
peekAllItems(): TValue[]
```

Defined in: [batcher.ts:246](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L246)

Returns a copy of all items in the batcher

#### Returns

`TValue`[]

***

### reset()

```ts
reset(): void
```

Defined in: [batcher.ts:260](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L260)

Resets the batcher state to its default values

#### Returns

`void`

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [batcher.ts:136](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L136)

Updates the batcher options

#### Parameters

##### newOptions

`Partial`\<[`BatcherOptions`](../../interfaces/batcheroptions.md)\<`TValue`\>\>

#### Returns

`void`

***

### start()

```ts
start(): void
```

Defined in: [batcher.ts:236](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L236)

Starts the batcher and processes any pending items

#### Returns

`void`

***

### stop()

```ts
stop(): void
```

Defined in: [batcher.ts:225](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/batcher.ts#L225)

Stops the batcher from processing batches

#### Returns

`void`
