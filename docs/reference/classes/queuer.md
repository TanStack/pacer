---
id: Queuer
title: Queuer
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: Queuer\<TValue\>

Defined in: [queuer.ts:267](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L267)

A flexible queue that processes items with configurable wait times, expiration, and priority.

This synchronous version is lighter weight and often all you need - upgrade to AsyncQueuer when you need promises, retry support, abort capabilities, concurrent execution, or advanced error handling.

Features:
- Automatic or manual processing of items
- FIFO (First In First Out), LIFO (Last In First Out), or double-ended queue behavior
- Priority-based ordering when getPriority is provided
- Item expiration and removal of stale items
- Callbacks for queue state changes, execution, rejection, and expiration

Running behavior:
- `start()`: Begins automatically processing items in the queue (defaults to isRunning)
- `stop()`: Pauses processing but maintains queue state
- `wait`: Configurable delay between processing items
- `onItemsChange`/`onExecute`: Callbacks for monitoring queue state

Manual processing is also supported when automatic processing is disabled:
- `execute()`: Processes the next item using the provided function
- `getNextItem()`: Removes and returns the next item without processing

Queue behavior defaults to FIFO:
- `addItem(item)`: Adds to the back of the queue
- Items processed from the front of the queue

Priority queue:
- Provide a `getPriority` function; higher values are processed first

Stack (LIFO):
- `addItem(item, 'back')`: Adds to the back
- `getNextItem('back')`: Removes from the back

Double-ended queue:
- `addItem(item, position)`: Adds to specified position ('front'/'back')
- `getNextItem(position)`: Removes from specified position

Item expiration:
- `expirationDuration`: Maximum time items can stay in the queue
- `getIsExpired`: Function to override default expiration
- `onExpire`: Callback for expired items

State Management:
- Uses TanStack Store for reactive state management
- Use `initialState` to provide initial state values when creating the queuer
- Use `onExecute` callback to react to item execution and implement custom logic
- Use `onItemsChange` callback to react to items being added or removed from the queue
- Use `onExpire` callback to react to items expiring and implement custom logic
- Use `onReject` callback to react to items being rejected when the queue is full
- The state includes execution count, expiration count, rejection count, and isRunning status
- State can be accessed via `queuer.store.state` when using the class directly
- When using framework adapters (React/Solid), state is accessed from `queuer.state`

Example usage:
```ts
// Auto-processing queue with wait time
const autoQueue = new Queuer<number>((n) => console.log(n), {
  started: true, // Begin processing immediately
  wait: 1000, // Wait 1s between items
  onExecute: (item, queuer) => console.log(`Processed ${item}`)
});
autoQueue.addItem(1); // Will process after 1s
autoQueue.addItem(2); // Will process 1s after first item

// Manual processing queue
const manualQueue = new Queuer<number>((n) => console.log(n), {
  started: false
});
manualQueue.addItem(1); // [1]
manualQueue.addItem(2); // [1, 2]
manualQueue.execute(); // logs 1, queue is [2]
manualQueue.getNextItem(); // returns 2, queue is empty
```

## Type Parameters

â€¢ **TValue**

## Constructors

### new Queuer()

```ts
new Queuer<TValue>(fn, initialOptions): Queuer<TValue>
```

Defined in: [queuer.ts:275](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L275)

#### Parameters

##### fn

(`item`) => `void`

##### initialOptions

[`QueuerOptions`](../../interfaces/queueroptions.md)\<`TValue`\> = `{}`

#### Returns

[`Queuer`](../queuer.md)\<`TValue`\>

## Properties

### fn()

```ts
fn: (item) => void;
```

Defined in: [queuer.ts:276](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L276)

#### Parameters

##### item

`TValue`

#### Returns

`void`

***

### key

```ts
key: string;
```

Defined in: [queuer.ts:271](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L271)

***

### options

```ts
options: QueuerOptions<TValue>;
```

Defined in: [queuer.ts:272](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L272)

***

### store

```ts
readonly store: Store<Readonly<QueuerState<TValue>>>;
```

Defined in: [queuer.ts:268](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L268)

## Methods

### \_emit()

```ts
_emit(): void
```

Defined in: [queuer.ts:313](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L313)

Emits a change event for the queuer instance. Mostly useful for devtools.

#### Returns

`void`

***

### addItem()

```ts
addItem(
   item, 
   position, 
   runOnItemsChange): boolean
```

Defined in: [queuer.ts:402](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L402)

Adds an item to the queue. If the queue is full, the item is rejected and onReject is called.
Items can be inserted based on priority or at the front/back depending on configuration.

Returns true if the item was added, false if the queue is full.

Example usage:
```ts
queuer.addItem('task');
queuer.addItem('task2', 'front');
```

#### Parameters

##### item

`TValue`

##### position

[`QueuePosition`](../../type-aliases/queueposition.md) = `...`

##### runOnItemsChange

`boolean` = `true`

#### Returns

`boolean`

***

### clear()

```ts
clear(): void
```

Defined in: [queuer.ts:684](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L684)

Removes all pending items from the queue. Does not affect items being processed.

#### Returns

`void`

***

### execute()

```ts
execute(position?): undefined | TValue
```

Defined in: [queuer.ts:538](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L538)

Removes and returns the next item from the queue and processes it using the provided function.

Example usage:
```ts
queuer.execute();
// LIFO
queuer.execute('back');
```

#### Parameters

##### position?

[`QueuePosition`](../../type-aliases/queueposition.md)

#### Returns

`undefined` \| `TValue`

***

### flush()

```ts
flush(numberOfItems, position?): void
```

Defined in: [queuer.ts:554](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L554)

Processes a specified number of items to execute immediately with no wait time
If no numberOfItems is provided, all items will be processed

#### Parameters

##### numberOfItems

`number` = `...`

##### position?

[`QueuePosition`](../../type-aliases/queueposition.md)

#### Returns

`void`

***

### flushAsBatch()

```ts
flushAsBatch(batchFunction): void
```

Defined in: [queuer.ts:569](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L569)

Processes all items in the queue as a batch using the provided function as an argument
The queue is cleared after processing

#### Parameters

##### batchFunction

(`items`) => `void`

#### Returns

`void`

***

### getNextItem()

```ts
getNextItem(position): undefined | TValue
```

Defined in: [queuer.ts:486](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L486)

Removes and returns the next item from the queue without executing the function.
Use for manual queue management. Normally, use execute() to process items.

Example usage:
```ts
// FIFO
queuer.getNextItem();
// LIFO
queuer.getNextItem('back');
```

#### Parameters

##### position

[`QueuePosition`](../../type-aliases/queueposition.md) = `...`

#### Returns

`undefined` \| `TValue`

***

### peekAllItems()

```ts
peekAllItems(): TValue[]
```

Defined in: [queuer.ts:652](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L652)

Returns a copy of all items in the queue.

#### Returns

`TValue`[]

***

### peekNextItem()

```ts
peekNextItem(position): undefined | TValue
```

Defined in: [queuer.ts:642](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L642)

Returns the next item in the queue without removing it.

Example usage:
```ts
queuer.peekNextItem(); // front
queuer.peekNextItem('back'); // back
```

#### Parameters

##### position

[`QueuePosition`](../../type-aliases/queueposition.md) = `'front'`

#### Returns

`undefined` \| `TValue`

***

### reset()

```ts
reset(): void
```

Defined in: [queuer.ts:692](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L692)

Resets the queuer state to its default values

#### Returns

`void`

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [queuer.ts:318](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L318)

Updates the queuer options. New options are merged with existing options.

#### Parameters

##### newOptions

`Partial`\<[`QueuerOptions`](../../interfaces/queueroptions.md)\<`TValue`\>\>

#### Returns

`void`

***

### start()

```ts
start(): void
```

Defined in: [queuer.ts:659](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L659)

Starts processing items in the queue. If already isRunning, does nothing.

#### Returns

`void`

***

### stop()

```ts
stop(): void
```

Defined in: [queuer.ts:669](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/queuer.ts#L669)

Stops processing items in the queue. Does not clear the queue.

#### Returns

`void`
