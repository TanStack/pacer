---
id: AsyncRetryer
title: AsyncRetryer
---

<!-- DO NOT EDIT: this page is autogenerated from the type comments -->

# Class: AsyncRetryer\<TFn\>

Defined in: [async-retryer.ts:214](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L214)

Provides robust retry functionality for asynchronous functions, supporting configurable backoff strategies,
attempt limits, and detailed state management. The AsyncRetryer class is designed to help you reliably
execute async operations that may fail intermittently, such as network requests or database operations,
by automatically retrying them according to your chosen policy.

## Retrying Concepts

- **Retrying**: Automatically re-executes a failed async function up to a specified number of attempts.
  Useful for handling transient errors (e.g., network flakiness, rate limits, temporary server issues).
- **Backoff Strategies**: Controls the delay between retry attempts (default: `'exponential'`):
  - `'exponential'`: Wait time doubles with each attempt (1s, 2s, 4s, ...) - **DEFAULT**
  - `'linear'`: Wait time increases linearly (1s, 2s, 3s, ...)
  - `'fixed'`: Waits a constant amount of time (`baseWait`) between each attempt
- **Jitter**: Adds randomness to retry delays to prevent thundering herd problems (default: `0`).
  Set to a value between 0-1 to apply that percentage of random variation to each delay.
- **Abort & Cancellation**: Supports cancellation via an internal `AbortController`. If cancelled, retries are stopped.
- **State Management**: Tracks execution status, current attempt, last error, and result using TanStack Store.
- **Callbacks**: Provides hooks for handling success, error, retry, and settled events.

## State Management
- Uses TanStack Store for fine-grained reactivity.
- State includes: `isExecuting`, `currentAttempt`, `lastError`, `lastResult`, and `status` (`idle`, `executing`, `retrying`, `disabled`).
- State can be accessed via the `store.state` property.

## Error Handling
The `throwOnError` option controls when errors are thrown (default: `'last'`):
- `'last'`: Only throws the final error after all retries are exhausted - **DEFAULT**
- `true`: Throws every error immediately (no retries)
- `false`: Never throws errors, returns `undefined` instead

Additional error handling:
- `onError`: Called for every error (including during retries)
- `onLastError`: Called only for the final error after all retries fail
- If `onError` is provided but `throwOnError` is not specified, defaults to `'last'`

## Usage
- Use for async operations that may fail transiently and benefit from retrying.
- Configure `maxAttempts`, `backoff`, `baseWait`, and `jitter` to control retry behavior.
- Use `onRetry`, `onSuccess`, `onError`, and `onSettled` for custom side effects.

## Example

```typescript
// Retry a fetch operation up to 5 times with exponential backoff and jitter
const retryer = new AsyncRetryer(fetchData, {
  maxAttempts: 5,
  backoff: 'exponential',
  baseWait: 1000,
  jitter: 0.1, // Add 10% random variation to prevent thundering herd
  onRetry: (attempt, error) => console.log(`Retry attempt ${attempt} after error:`, error),
  onSuccess: (result) => console.log('Success:', result),
  onError: (error) => console.error('Error:', error),
  onLastError: (error) => console.error('All retries failed:', error),
})

const result = await retryer.execute(userId)
```

## Type Parameters

â€¢ **TFn** *extends* [`AnyAsyncFunction`](../../type-aliases/anyasyncfunction.md)

The async function type to be retried.

## Constructors

### new AsyncRetryer()

```ts
new AsyncRetryer<TFn>(fn, initialOptions): AsyncRetryer<TFn>
```

Defined in: [async-retryer.ts:227](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L227)

Creates a new AsyncRetryer instance

#### Parameters

##### fn

`TFn`

The async function to retry

##### initialOptions

[`AsyncRetryerOptions`](../../interfaces/asyncretryeroptions.md)\<`TFn`\> = `{}`

Configuration options for the retryer

#### Returns

[`AsyncRetryer`](../asyncretryer.md)\<`TFn`\>

## Properties

### fn

```ts
fn: TFn;
```

Defined in: [async-retryer.ts:228](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L228)

The async function to retry

***

### key

```ts
key: string;
```

Defined in: [async-retryer.ts:218](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L218)

***

### options

```ts
options: AsyncRetryerOptions<TFn> & Omit<Required<AsyncRetryerOptions<any>>, 
  | "initialState"
  | "onError"
  | "onSettled"
  | "onSuccess"
  | "key"
  | "onLastError"
| "onRetry">;
```

Defined in: [async-retryer.ts:219](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L219)

***

### store

```ts
readonly store: Store<Readonly<AsyncRetryerState<TFn>>>;
```

Defined in: [async-retryer.ts:215](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L215)

## Methods

### \_emit()

```ts
_emit(): void
```

Defined in: [async-retryer.ts:251](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L251)

Emits a change event for the async retryer instance. Mostly useful for devtools.

#### Returns

`void`

***

### abort()

```ts
abort(): void
```

Defined in: [async-retryer.ts:452](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L452)

Cancels the current execution and any pending retries

#### Returns

`void`

***

### execute()

```ts
execute(...args): Promise<undefined | ReturnType<TFn>>
```

Defined in: [async-retryer.ts:341](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L341)

Executes the function with retry logic

#### Parameters

##### args

...`Parameters`\<`TFn`\>

Arguments to pass to the function

#### Returns

`Promise`\<`undefined` \| `ReturnType`\<`TFn`\>\>

The function result, or undefined if disabled or all retries failed (when throwOnError is false)

#### Throws

The last error if throwOnError is true and all retries fail

***

### reset()

```ts
reset(): void
```

Defined in: [async-retryer.ts:465](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L465)

Resets the retryer to its initial state and cancels any ongoing execution

#### Returns

`void`

***

### setOptions()

```ts
setOptions(newOptions): void
```

Defined in: [async-retryer.ts:257](https://github.com/TanStack/pacer/blob/main/packages/pacer/src/async-retryer.ts#L257)

Updates the retryer options

#### Parameters

##### newOptions

`Partial`\<[`AsyncRetryerOptions`](../../interfaces/asyncretryeroptions.md)\<`TFn`\>\>

Partial options to merge with existing options

#### Returns

`void`
